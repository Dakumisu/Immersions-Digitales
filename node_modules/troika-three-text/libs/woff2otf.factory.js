/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with tiny-inflate 
(https://github.com/foliojs/tiny-inflate) for use in Troika text rendering. 
Original licenses apply: 
- tiny-inflate: https://github.com/foliojs/tiny-inflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/
export default function(){return function(t){"use strict";function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(t,r){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new e,this.dtree=new e}var n=new e,o=new e,a=new Uint8Array(30),s=new Uint16Array(30),i=new Uint8Array(30),u=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new e,g=new Uint8Array(320);function b(t,e,r,n){var o,a;for(o=0;o<r;++o)t[o]=0;for(o=0;o<30-r;++o)t[o+r]=o/r|0;for(a=n,o=0;o<30;++o)e[o]=a,a+=1<<t[o]}var d=new Uint16Array(16);function h(t,e,r,n){var o,a;for(o=0;o<16;++o)t.table[o]=0;for(o=0;o<n;++o)t.table[e[r+o]]++;for(t.table[0]=0,a=0,o=0;o<16;++o)d[o]=a,a+=t.table[o];for(o=0;o<n;++o)e[r+o]&&(t.trans[d[e[r+o]]++]=o)}function l(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function v(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,n+r}function w(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,n=0,o=0,a=t.tag;do{n=2*n+(1&a),a>>>=1,++o,r+=e.table[o],n-=e.table[o]}while(n>=0);return t.tag=a,t.bitcount-=o,e.trans[r+n]}function L(t,e,r){var n,o,a,s,i,u;for(n=v(t,5,257),o=v(t,5,1),a=v(t,4,4),s=0;s<19;++s)g[s]=0;for(s=0;s<a;++s){var b=v(t,3,0);g[f[s]]=b}for(h(c,g,0,19),i=0;i<n+o;){var d=w(t,c);switch(d){case 16:var l=g[i-1];for(u=v(t,2,3);u;--u)g[i++]=l;break;case 17:for(u=v(t,3,3);u;--u)g[i++]=0;break;case 18:for(u=v(t,7,11);u;--u)g[i++]=0;break;default:g[i++]=d}}h(e,g,0,n),h(r,g,n,o)}function U(t,e,r){for(;;){var n,o,f,c,g=w(t,e);if(256===g)return 0;if(g<256)t.dest[t.destLen++]=g;else for(n=v(t,a[g-=257],s[g]),o=w(t,r),c=f=t.destLen-v(t,i[o],u[o]);c<f+n;++c)t.dest[t.destLen++]=t.dest[c]}}function m(t){for(var e,r;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if((e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return-3;for(t.sourceIndex+=4,r=e;r;--r)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}!function(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[168+r]=280+r;for(r=0;r<112;++r)t.trans[176+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}(n,o),b(a,s,4,3),b(i,u,2,1),a[28]=0,s[28]=258;var y=function(t,e){var a,s,i=new r(t,e);do{switch(a=l(i),v(i,2,0)){case 0:s=m(i);break;case 1:s=U(i,n,o);break;case 2:L(i,i.ltree,i.dtree),s=U(i,i.ltree,i.dtree);break;default:s=-3}if(0!==s)throw new Error("Data error")}while(!a);return i.destLen<i.dest.length?"function"==typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen):i.dest};return t.convert_streams=function(t){var e=new DataView(t),r=0;function n(){var t=e.getUint16(r);return r+=2,t}function o(){var t=e.getUint32(r);return r+=4,t}function a(t){w.setUint16(L,t),L+=2}function s(t){w.setUint32(L,t),L+=4}for(var i={signature:o(),flavor:o(),length:o(),numTables:n(),reserved:n(),totalSfntSize:o(),majorVersion:n(),minorVersion:n(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},u=0;Math.pow(2,u)<=i.numTables;)u++;u--;for(var f=16*Math.pow(2,u),c=16*i.numTables-f,g=12,b=[],d=0;d<i.numTables;d++)b.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),g+=16;var h,l=new Uint8Array(12+16*b.length+b.reduce((function(t,e){return t+e.origLength+4}),0)),v=l.buffer,w=new DataView(v),L=0;return s(i.flavor),a(i.numTables),a(f),a(u),a(c),b.forEach((function(t){s(t.tag),s(t.origChecksum),s(g),s(t.origLength),t.outOffset=g,(g+=t.origLength)%4!=0&&(g+=4-g%4)})),b.forEach((function(e){var r=t.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var n=new Uint8Array(e.origLength);y(new Uint8Array(r,2),n)}else n=new Uint8Array(r);l.set(n,e.outOffset);var o=0;(g=e.outOffset+e.origLength)%4!=0&&(o=4-g%4),l.set(new Uint8Array(o).buffer,e.outOffset+e.origLength),h=g+o})),v.slice(0,h)},t}({}).convert_streams}
