'use strict';(function(e,p){"object"===typeof exports&&"undefined"!==typeof module?p(exports):"function"===typeof define&&define.amd?define(["exports"],p):(e=e||self,p(e.troika_animation={}))})(this,function(e){function p(a,b){return function(c){return.5>c?.5*a(2*c):.5*b(2*c-1)+.5}}function u(a){return function(b){return k(b,a)}}function v(a){return function(b){return 1-k(1-b,a)}}function w(a){return function(b){return.5>b?.5*k(2*b,a):.5*(1-k(1-(2*b-1),a))+.5}}function t(a,b,c){return a+(b-a)*c}function R(a,
b){return a.totalElapsed-b.totalElapsed}function S(){}function T(a){return a.runner$running}function U(a){return!a.runner$stopped}function V(){var a=Date.now();q=null;x&&(r=r.filter(T),x=!1);if(r.length){for(var b=r.length;0<b--;)r[b]._tick(a);B()}}function B(){q||(q=y.requestAnimationFrame(V))}var k=Math.pow,C=Math.PI,G=Math.sqrt,H=C/2,W=2*C,z=u(2),D=v(2),l=w(2),n=u(3),X=v(3),Y=w(3),Z=u(4),aa=v(4),ba=w(4),ca=u(5),da=v(5),ea=w(5),I=function(a){return 1-G(1-a*a)},J=function(a){return G(1-k(a-1,2))},
fa=p(I,J),K=function(a){return 0===a||1===a?a:1-E(1-a)},E=function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*W/.3)+1},ha=p(K,E),L=function(a){return 1-F(1-a)},F=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},ia=p(L,F),M=Object.freeze({__proto__:null,linear:function(a){return a},easeInQuad:z,easeOutQuad:D,easeInOutQuad:l,easeInCubic:n,easeOutCubic:X,easeInOutCubic:Y,easeInQuart:Z,
easeOutQuart:aa,easeInOutQuart:ba,easeInQuint:ca,easeOutQuint:da,easeInOutQuint:ea,easeInSine:function(a){return 1-Math.cos(a*H)},easeOutSine:function(a){return Math.sin(a*H)},easeInOutSine:function(a){return-.5*(Math.cos(C*a)-1)},easeInExpo:function(a){return 0===a?0:k(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:1-k(2,-10*a)},easeInOutExpo:function(a){return 0===a||1===a?a:.5>a?.5*k(2,10*(2*a-1)):.5*(1-k(2,-10*(2*a-1)))+.5},easeInCirc:I,easeOutCirc:J,easeInOutCirc:fa,easeInElastic:K,easeOutElastic:E,
easeInOutElastic:ha,easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return--a*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)},easeInBounce:L,easeOutBounce:F,easeInOutBounce:ia}),N=function(){var a,b,c=Object.create(null),f=0;return function(g){if("number"===typeof g)return g;if("string"===typeof g){if(g in c)return c[g];a||(a=document.createElement("canvas"),b=a.getContext("2d"));
a.width=a.height=1;b.fillStyle=g;b.fillRect(0,0,1,1);var d=b.getImageData(0,0,1,1).data;d=d[0]<<16^d[1]<<8^d[2];2048<f&&(c=Object.create(null),f=0);c[g]=d;f++;return d}return g&&g.isColor?g.getHex():0}}(),O=Object.freeze({__proto__:null,number:t,color:function(a,b,c){a=N(a);b=N(b);var f=t(a>>16&255,b>>16&255,c),g=t(a>>8&255,b>>8&255,c);a=t(a&255,b&255,c);return f<<16^g<<8^a}});n=function(){};n.prototype.gotoElapsedTime=function(a){};n.prototype.gotoEnd=function(){};n.prototype.isDoneAtElapsedTime=
function(a){};var P=function(a){return a};z=function(a){function b(b,f,g,d,h,m,e,l,k){void 0===d&&(d=750);void 0===h&&(h=0);void 0===m&&(m=P);void 0===e&&(e=1);void 0===l&&(l="forward");void 0===k&&(k="number");a.call(this);this.callback=b;this.fromValue=f;this.toValue=g;this.duration=d;this.delay=h;this.easing="string"===typeof m?M[m]||P:m;this.iterations=e;this.direction=l;this.interpolate="function"===typeof k?k:O[k]||t;this.totalElapsed=9007199254740991>this.iterations?this.delay+this.duration*
this.iterations:9007199254740991}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.gotoElapsedTime=function(a){var b=this.duration,c=this.delay;if(a>=c){a=Math.min(a,this.totalElapsed)-c;c=a%b/b;0===c&&0!==a&&(c=1);c=this.easing(c);if("reverse"===this.direction||"alternate"===this.direction&&0===Math.ceil(a/b)%2)c=1-c;this.callback(this.interpolate(this.fromValue,this.toValue,c))}};b.prototype.gotoEnd=function(){this.gotoElapsedTime(this.totalElapsed)};
b.prototype.isDoneAtElapsedTime=function(a){return a>this.totalElapsed};return b}(n);D=function(a){function b(b,f,g,d,h,m){"number"!==typeof f&&(f=b.reduce(function(a,b){return Math.max(a,b.totalElapsed)},0));Infinity===f&&(f=Number.MAX_VALUE);a.call(this,null,0,f,f,g,d,h,m);1===b.length?this.callback=b[0].gotoElapsedTime.bind(b[0]):(b.sort(R),this.callback=this._syncTweens);this.tweens=b}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype._syncTweens=
function(a){for(var b=0,c=this.tweens.length;b<c;b++)this.tweens[b].gotoElapsedTime(a)};return b}(z);var r=[],q=null,x=!1,y=window;l=function(){this.tweens=[]};l.prototype.destructor=function(){this.tweens=null;this.runner$running=!1;x=!0;this.start=this.stop=this.pause=this._tick=S};l.prototype.start=function(a){a.runner$paused&&a.runner$started?a.runner$started+=Date.now()-a.runner$paused:this.tweens.push(a);a.runner$paused=null;a.runner$stopped=!1;this.runner$running||(this.runner$running=!0,r.push(this),
B())};l.prototype.stop=function(a){a.runner$stopped=!0;a.runner$paused=null};l.prototype.pause=function(a){a.runner$paused||(a.runner$paused=Date.now())};l.prototype.stopAll=function(){this.tweens&&this.tweens.forEach(this.stop,this)};l.prototype._tick=function(a){for(var b=this.tweens,c=!1,f=!1,g=0,d=b.length;g<d;g++){var h=b[g];if(!h.runner$stopped&&!h.runner$paused){var m=a-(h.runner$started||(h.runner$started=a));h.gotoElapsedTime(m);f=!0;if(h.isDoneAtElapsedTime(m)&&(this.stop(h),h.onDone))h.onDone()}h.runner$stopped&&
(c=!0)}if(f)this.onTick();if(c&&(this.tweens=b.filter(U),!this.tweens.length&&(this.runner$running=!1,x=!0,this.onDone)))this.onDone()};l.prototype.onTick=function(){};l.prototype.onDone=function(){};var Q={default:{mass:1,tension:170,friction:26},gentle:{mass:1,tension:120,friction:14},wobbly:{mass:1,tension:180,friction:12},stiff:{mass:1,tension:210,friction:20},slow:{mass:1,tension:280,friction:60},molasses:{mass:1,tension:280,friction:120}},A=Q.default;n=function(a){function b(b,f,g,d,h,m){void 0===
h&&(h=0);void 0===m&&(m=0);a.call(this);this.isSpring=!0;this.callback=b;this.currentValue=f;this.toValue=g;this.velocity=h;this.delay=m;"string"===typeof d&&(d=Q[d]);d||(d=A);b=d.mass;f=d.tension;d=d.friction;this.mass="number"===typeof b?b:A.mass;this.tension=1E-6*("number"===typeof f?f:A.tension);this.friction=.001*("number"===typeof d?d:A.friction);this.minAcceleration=1E-10;this.$lastTime=m;this.$endTime=Infinity}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.gotoElapsedTime=function(a){if(a>=this.delay){for(var b=this.toValue,c=this.mass,d=this.tension,h=this.friction,m=this.minAcceleration,e=this.velocity||0,k=this.currentValue,l=this.$lastTime;l<a;l++){var n=(d*(b-k)-h*e)/c;if(Math.abs(n)<m){e=0;k=b;this.$endTime=l;break}else e+=n,k+=e}this.velocity=e;this.$lastTime=a;this.callback(this.currentValue=k)}};b.prototype.gotoEnd=function(){this.velocity=0;this.$lastTime=this.$endTime;this.callback(this.currentValue=this.toValue)};b.prototype.isDoneAtElapsedTime=
function(a){return a>=this.$endTime};return b}(n);e.Easings=M;e.Interpolators=O;e.MultiTween=D;e.Runner=l;e.SpringTween=n;e.Tween=z;e.setAnimationScheduler=function(a){a=a||window;a!==y&&(q&&(y.cancelAnimationFrame(q),q=null),y=a,B())};Object.defineProperty(e,"__esModule",{value:!0})})
